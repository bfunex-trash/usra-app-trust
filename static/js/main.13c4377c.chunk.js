(this.webpackJsonptrust=this.webpackJsonptrust||[]).push([[0],{31:function(e,t,a){e.exports=a(44)},44:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(16),c=a.n(r),m=(a(36),a(37),a(19)),o=a(18),u=a(1),s=a(15);function i(e){return null!=e&&isFinite(e)?e:NaN}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a=a&&" ".concat(a.trim()),null!=e&&isFinite(e)?(t?e.toFixed(t):e)+a:"N/A"}function p(e){return"".concat((100*e).toFixed(2),"%")}var E,b=localStorage.getItem("state"),v=b?(E=JSON.parse(b),{projects:Object(s.a)(E.projects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{needs:Object(s.a)(e.needs)})})))}):{projects:Object(s.a)()};function f(e){return e.energy=e.hours*((e.prolifiratedPower=e.quantity*e.power)/1e3),e}function N(e,t){return e+t.energy}function g(e,t){return e+t.prolifiratedPower}function h(e){return e.reduce(N,0)}function j(e){return e.reduce(g,0)}var y=v.projects.reduce((function(e,t){return Math.max(e,t.id+1)}),0);var x=[{model:"12MD325P",vendor:"Rolls",Vnom:12,Cnom:325,"\u0220":.98},{model:"Solar 12V / 160 Ah",vendor:"Generic",Vnom:12,Cnom:160,"\u0220":.98},{model:"12-CS-11PS",vendor:"Rolls",Vnom:12,Cnom:296,"\u0220":.98}],V=[{name:"ENP Sonne 180Wc",type:"Polycristalline",Voc:38.2,Vmp:24,Pm:180,Isc:5.38,Imp:5.2,output:.1598,temperture:[-40,85]},{name:"SUNTECH 280Wc",Pm:260,Voc:38.2,Isc:8.9,Vmp:30.7,Imp:8.47,output:.1598,temperture:[-40,85],type:"Polycristalline"},{name:"TESLA POWER",Pm:280,Voc:38.2,Isc:9.38,Vmp:31.6,Imp:8.86,output:.171,temperture:[-40,85],type:"Polycristalline"}],w=[{vendor:"15Kva Offgrid Solo Inverter",Pnom:15,PVmpp:[120,440],Vmax:550,"\u0220":.97},{vendor:"Generic",Pnom:3,PVmpp:[125,440],Vmax:550,"\u0220":.97}],O=[{name:"Xantex - 60A - 12V/24V",I:60,Vout:24}],P=1.724e-8;function C(e,t,a){return P*e*t/a*2e6}function I(e){return.04*e}var S=Math.sqrt(3);var k=I(220);function M(e){var t,a,n,l,r=e.Vsystem,c=e.Pc=(t=e.energyBesoinTotal,a=e.\u0220b,n=e.Kloss,l=e.Htilt,t/(a*n*l)*1),m=V[e.module],o=i(null===m||void 0===m?void 0:m.Isc),u=e.Msc=Math.ceil(r/i(null===m||void 0===m?void 0:m.Vmp)),s=e.Mpc=Math.ceil(1e3*c/(u*i(null===m||void 0===m?void 0:m.Pm)));e.Mt=s*u;var d=e.Nc,p=e.DODmax,E=e.\u0220out,b=x[e.battery],v=w[e.inverter],f=e.Cx=function(e,t,a,n,l){return 1e3*e*t/(a*n*l)}(d,e.energyBesoinTotal,p,r,E),N=e.Bt=Math.ceil(f/i(null===b||void 0===b?void 0:b.Cnom)),g=e.Bsc=Math.ceil(r/i(null===b||void 0===b?void 0:b.Vnom));e.Bpc=Math.floor(N/g),e.Pi=1.25*e.Pf/1e3,e.nombreOnduleur=Math.max(1,Math.round(e.Pi/i(null===v||void 0===v?void 0:v.Pnom)));var h=e.Irated=o*s*1.25,j=O[e.regulator];e.Rc=Math.ceil(h/i(null===j||void 0===j?void 0:j.I));var y=i(null===m||void 0===m?void 0:m.Voc),P=i(null===b||void 0===b?void 0:b.\u0220),M=i(null===v||void 0===v?void 0:v.Pnom),A=e.Lmr,F=e.Lbi,B=e.Lic,D=e.Vmr=function(e,t){return I(e*t*1.15)}(y,u);e.Smr=C(h,A,D);var q=e.Ibi=function(e,t,a){return 1e3*e/(t*a)}(M,P,r),L=e.Vbi=I(r);e.Sbi=C(q,F,L);var T=e.Iic=function(e){return 1e3*e/(220*S)}(M);return e.Sic=C(T,B,k),e}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"project:set":var a=t.payload,n=a.id,l=a.name,r=a.value,c=Object(u.a)(Object(u.a)({},e.projects.get(n)),{},Object(o.a)({},l,r));return Object(u.a)(Object(u.a)({},e),{},{projects:e.projects.set(n,M(c))});case"project.needs:set":var m=t.payload,i=m.id,d=m.needs,p=e.projects.get(i),E=d.map((function(e){return f(Object(u.a)({},e))}));return Object(u.a)(Object(u.a)({},e),{},{projects:e.projects.set(i,M(Object(u.a)(Object(u.a)({},p),{},{needs:E,energyBesoinTotal:h(E),Pf:j(E)})))});case"project:delete":var b=t.payload.id;return Object(u.a)(Object(u.a)({},e),{},{projects:e.projects.filter((function(e){return e.id!==b}))});case"project:edit":var N=t.payload,g=N.id,x=N.name,V=N.site;return Object(u.a)(Object(u.a)({},e),{},{projects:e.projects.set(g,Object(u.a)(Object(u.a)({},e.projects.get(g)),{},{id:g,name:x,site:V}))});case"project:create":var w=t.payload,O=w.name,P=w.site;return Object(u.a)(Object(u.a)({},e),{},{projects:e.projects.push({id:y++,name:O,site:P,needs:Object(s.a)(),energyBesoinTotal:0,Pf:0,Htilt:0,Kloss:0,Mpc:0,Msc:0,Mt:0,Pc:0,Vsystem:0,module:-1,battery:-1,inverter:-1,regulator:-1,"\u0220b":0,Nc:1,DODmax:.01,"\u0220out":.01,Cx:0,Bpc:0,Bsc:0,Bt:0,Pi:0,nombreOnduleur:NaN,Irated:0,Rc:0,Lmr:0,Vmr:NaN,Smr:NaN,Lbi:0,Ibi:NaN,Vbi:NaN,Sbi:NaN,Lic:0,Iic:NaN,Sic:NaN})});default:return e}}function F(e){return{projects:e.projects.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{needs:e.needs.toArray()})})).toArray()}}var B=Object(m.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=A(e,t);return localStorage.setItem("state",JSON.stringify(F(a))),a})),D=a(10),q=a(11),L="Simulateur PV";function T(){document.title=L}function K(){return Object(n.useEffect)(T),l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-success d-print-none"},l.a.createElement("div",{className:"container-md"},l.a.createElement(D.b,{to:"/",className:"navbar-brand"},L)))}var R,W=a(5);!function(e){e[e.Normal=0]="Normal",e[e.EditProject=1]="EditProject",e[e.CreateProject=2]="CreateProject"}(R||(R={}));var H=["Cr\xe9er un nouveau projet","Renommer","Cr\xe9er"],J=Object(q.b)((function(e,t){return{current:t.current,projects:e.projects}}),{create:function(e,t){return{type:"project:create",payload:{name:e,site:t}}},edit:function(e,t,a){return{type:"project:edit",payload:{id:e,name:t,site:a}}},remove:function(e){return{type:"project:delete",payload:{id:e}}}})((function(e){var t=e.current,a=e.projects,r=e.create,c=e.edit,m=e.remove,o=Object(n.useState)(""),u=Object(W.a)(o,2),s=u[0],i=u[1],d=Object(n.useState)(""),p=Object(W.a)(d,2),E=p[0],b=p[1],v=Object(n.useState)(R.Normal),f=Object(W.a)(v,2),N=f[0],g=f[1],h=Object(n.useState)(-1),j=Object(W.a)(h,2),y=j[0],x=j[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"list-group list-group-flush d-print-none mb-3"},a.map((function(e){return l.a.createElement(D.b,{to:"/".concat(e.id),className:"list-group-item list-group-item-action ".concat(N!==R.Normal?"disabled":""," ").concat(t===e.id?"active list-group-item-success":""),key:e.id},l.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.a.createElement("h5",null,e.name,l.a.createElement("small",{className:"font-weight-light",hidden:""===e.site}," (",e.site,")")),l.a.createElement("div",{className:"btn-group btn-group-sm"},l.a.createElement("button",{type:"button",className:"btn",hidden:N!==R.Normal,onClick:function(a){window.confirm("Voulez vous vraiment supprimer le projet ?")&&(a.stopPropagation(),m(e.id),requestAnimationFrame((function(){x(t)})))}},l.a.createElement("span",{role:"img","aria-label":"Supprimer"},"\u274c")),l.a.createElement("button",{type:"button",className:"btn",hidden:N!==R.Normal,onClick:function(){x(e.id),i(e.name),b(e.site),g(R.EditProject)}},l.a.createElement("span",{role:"img","aria-label":"Ronommer"},"\u270f\ufe0f")))))}))),l.a.createElement("form",{className:"d-print-none"},l.a.createElement("div",{hidden:N===R.Normal},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"col-4 col-form-label"},"Nom de projet:"),l.a.createElement("div",{className:"col-8"},l.a.createElement("input",{type:"text",value:s,className:"form-control form-control-sm",onChange:function(e){return i(e.target.value)}}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"col-4 col-form-label"},"Site de projet:"),l.a.createElement("div",{className:"col-8"},l.a.createElement("input",{type:"text",value:E,className:"form-control form-control-sm",onChange:function(e){return b(e.target.value)}})))),l.a.createElement("div",{className:"d-flex justify-content-evenly mt-2"},l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm",hidden:N===R.Normal,onClick:function(){g(R.Normal)}},"Annuler"),l.a.createElement("button",{type:"submit",className:"btn btn-outline-success btn-sm",onClick:function(e){switch(e.preventDefault(),N){case R.Normal:return i(""),b(""),void g(R.CreateProject);case R.CreateProject:return r(s,E),void g(R.Normal);case R.EditProject:return c(y,s,E),void g(R.Normal)}}},H[N]))))})),z=a(12),G=a.n(z),Q=a(30),U=a(21);function X(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(U.a)(G.a.mark((function e(t){var a,n,l,r,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.selectFiles||(window.selectFiles=$()),e.next=3,a(t);case 3:if(n=e.sent,!t.multiple){e.next=8;break}return e.abrupt("return",n);case 8:l=0,r=Array.from(n);case 9:if(!(l<r.length)){e.next=15;break}return c=r[l],e.abrupt("return",c);case 12:l++,e.next=9;break;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){var e=document.createElement("input");e.type="file";var t=document.createElement("form");return t.appendChild(e),t.hidden=!0,document.body.appendChild(t),function(a){var n=a.accept,l=void 0===n?"":n,r=a.multiple,c=void 0===r||r;return e.accept=l,e.multiple=c,new Promise((function(a,n){t.reset(),e.click(),e.onchange=function(){null==e.files?n("No files selected"):a(e.files),e.onchange=null}}))}}function Z(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.delimiter,l=void 0===n?"\n":n,r=a.separator,c=void 0===r?/[\t,;]/:r;return e.trim().split(l).map((function(e){return e.trim()})).filter((function(e){return e})).map((function(e){try{return t(e.split(c).map((function(e){return e.trim()})))}catch(a){return console.warn(a),null}})).filter((function(e){return e}))}function _(e,t){return e.prolifiratedPower+=t.prolifiratedPower,e.quantity+=t.quantity,e.energy+=t.energy,e.hours+=t.hours,e.power+=t.power,e}function ee(e){return!e.selected}function te(e){var t=e.current,a=e.needs,n=e.setNeeds,r=a.reduce(_,{name:"Total",energy:0,hours:0,power:0,prolifiratedPower:0,quantity:0,selected:!1});return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-sm table-hover align-middle table-needs"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"d-print-none"},"\xa0\xa0\xa0\xa0\xa0"),l.a.createElement("th",{scope:"col",title:"Nom de l'equipement"},"Equipement"),l.a.createElement("th",{scope:"col",title:"Nombre d'heurs d'uitilisation par jour"},"Utilisation (h/j)"),l.a.createElement("th",{scope:"col",title:"Quantit\xe9 d'equipement utilis\xe9"},"Quantit\xe9"),l.a.createElement("th",{scope:"col",title:"Puissance de l'equipement en KiloWatt"},"Puissance (w)"),l.a.createElement("th",{scope:"col",title:"Puissance des equipements en KiloWatt"},"Puissance foison\xe9e (w)"),l.a.createElement("th",{scope:"col",title:"Energie consom\xe9e par les equipements en KiloWatt-heur par jour"},"Energie (Kwh/j)"))),a.size>=0?l.a.createElement(l.a.Fragment,null,l.a.createElement("tbody",null,a.map((function(e,r){return l.a.createElement("tr",{key:r,tabIndex:-1,style:{cursor:"default"},className:e.name?"":"table-warning",onClick:function(e){"TD"===e.target.tagName&&n(t,function(e,t){var a=e.get(t);return e.set(t,f(Object(u.a)(Object(u.a)({},a),{},{selected:!a.selected})))}(a,r))}},l.a.createElement("td",{className:"d-print-none"},e.selected?l.a.createElement("span",{role:"img","aria-label":"Selectionn\xe9",style:{userSelect:"none",pointerEvents:"none",touchAction:"none"}},"\u2714\ufe0f"):null),l.a.createElement("th",null,l.a.createElement("input",{type:"text",className:"form-control-plaintext",value:e.name,onChange:function(e){return n(t,function(e,t,a){return e.set(t,Object(u.a)(Object(u.a)({},e.get(t)),{},{name:a}))}(a,r,e.target.value))}})),l.a.createElement("td",null,l.a.createElement("input",{type:"number",min:"1",max:"24",step:"0",className:"form-control-plaintext",value:Math.round(e.hours),onChange:function(e){return n(t,function(e,t,a){return e.set(t,f(Object(u.a)(Object(u.a)({},e.get(t)),{},{hours:a})))}(a,r,e.target.valueAsNumber))}})),l.a.createElement("td",null,l.a.createElement("input",{type:"number",min:"0",step:"1",className:"form-control-plaintext",value:Math.round(e.quantity),onChange:function(e){return n(t,function(e,t,a){return e.set(t,f(Object(u.a)(Object(u.a)({},e.get(t)),{},{quantity:a})))}(a,r,e.target.valueAsNumber))}})),l.a.createElement("td",null,l.a.createElement("input",{type:"number",min:"0",step:"0.01",className:"form-control-plaintext",value:e.power,onChange:function(e){return n(t,function(e,t,a){return e.set(t,f(Object(u.a)(Object(u.a)({},e.get(t)),{},{power:a})))}(a,r,e.target.valueAsNumber))}})),l.a.createElement("td",null,e.prolifiratedPower),l.a.createElement("td",null,e.energy.toFixed(2)))}))),l.a.createElement("tfoot",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"d-print-none"}),l.a.createElement("th",{scope:"row"},"Total"),l.a.createElement("td",null,Math.round(r.hours)),l.a.createElement("td",null,Math.round(r.quantity)),l.a.createElement("td",null,r.power.toFixed(2)),l.a.createElement("td",null,r.prolifiratedPower.toFixed(2)),l.a.createElement("td",null,r.energy.toFixed(2))))):null)),l.a.createElement("div",{className:"d-flex d-print-none flex-wrap justify-content-evenly mb-2"},l.a.createElement("button",{disabled:a.every(ee),onClick:function(){window.confirm("Voulez vous vraiment supprimer les lignes ?")&&n(t,a.filter(ee))},type:"button",className:"btn btn-danger",title:"Supprimer la selection"},"Supprimer"),l.a.createElement("button",{onClick:Object(U.a)(G.a.mark((function e(){var l,r,c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X({accept:".csv",multiple:!1});case 3:return l=e.sent,e.next=6,l.text();case 6:r=e.sent,c=Z(r,(function(e){var t,a,n,l=Object(W.a)(e,4),r=l[0],c=l[1],m=l[2],o=l[3];return f({name:r,hours:(t=parseInt(c),a=1,n=24,Math.min(n,Math.max(a,t))),quantity:Math.max(1,parseInt(m)),power:Math.max(0,parseFloat(o)),selected:!1})})),n(t,a.push.apply(a,Object(Q.a)(c))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),type:"button",className:"btn btn-warning"},"Importer"),l.a.createElement("button",{onClick:function(){return n(t,function(e){return e.push(f({name:"",hours:0,power:0,quantity:0,selected:!1}))}(a))},type:"button",className:"btn btn-success"},"Ajouter")))}function ae(e){var t=e.label,a=e.value,n=e.unit;return l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{className:"offset-sm-2 col-sm-4 col-form-label"},"string"===typeof t?t:t(),":"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"input-group"},l.a.createElement("input",{type:"text",value:a,readOnly:!0,className:"form-control form-control-sm"}),l.a.createElement("span",{className:"input-group-text"},n))))}function ne(e){var t=e.label,a=e.items,n=e.value,r=e.onChange;return l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{className:"offset-sm-2 col-sm-4 col-form-label"},t,":"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("select",{className:"form-select form-select-sm",value:n,onChange:function(e){return r(parseInt(e.target.value,10))}},l.a.createElement("option",{value:-1}),a.map((function(e,t){return l.a.createElement("option",{key:t,value:t},e.name)})))))}function le(e){var t=e.label,a=e.value;return l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{className:"offset-sm-2 col-sm-4 col-form-label"},t,":"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",{type:"text",className:"form-control form-control-sm",readOnly:!0,value:a})))}var re=a(22);function ce(e){var t=e.value,a=e.setValue,n=e.field,r=e.unit,c=Object(re.a)(e,["value","setValue","field","unit"]);return l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("label",{className:"offset-sm-2 col-sm-4 col-form-label"},"string"===typeof n?n:n(),":"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"input-group mb-3"},l.a.createElement("input",Object.assign({type:"number",value:t,onChange:function(e){return a(e.target.valueAsNumber)},className:"form-control form-control-sm"},c)),l.a.createElement("span",{className:"input-group-text"},r))))}function me(e){var t=e.value,a=e.setValue,n=e.field,r=Object(re.a)(e,["value","setValue","field"]);return l.a.createElement("div",{className:"mb-1 row"},l.a.createElement("label",{className:"offset-sm-2 col-sm-4 col-form-label"},"string"===typeof n?n:n(),":"),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",Object.assign({type:"number",value:t,onChange:function(e){return a(e.target.valueAsNumber)},className:"form-control form-control-sm"},r))))}function oe(e){return"string"===typeof e?e:e()}var ue=new WeakMap;function se(e){if(ue.has(e))return ue.get(e);for(var t=Object.keys(e),a=Object.values(e),n=[],l=t.length,r=0;r<l;r+=2){var c=[];c.push({name:t[r],label:a[r]}),r!==l-1&&c.push({name:t[r+1],label:a[r+1]}),n.push(c)}return ue.set(e,n),n}function ie(e){var t=e.module,a=e.rows;return l.a.createElement(l.a.Fragment,null,a.map((function(e,a){var n=Object(W.a)(e,2),r=n[0],c=n[1];return l.a.createElement("div",{className:"mb-2 row",key:a},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"flex-fill"},oe(r.label),":"),l.a.createElement("div",{className:"flex-fill text-right"},t[r.name]))),c?l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"flex-fill"},oe(c.label),":"),l.a.createElement("div",{className:"flex-fill text-right"},t[c.name]))):null)})))}function de(e){var t=e.module,a=e.labels;return l.a.createElement("div",{className:"mb-3 row"},l.a.createElement("div",{className:"offset-sm-1 col-sm-10"},l.a.createElement("div",{className:"card bg-light"},l.a.createElement("div",{className:"card-body"}," ",t?l.a.createElement(ie,{module:t,rows:se(a)}):"Selectionner une module."," "))))}var pe={type:"Type",Pm:"Puissance max",Voc:"Tension en circuit ouvert",Isc:"Courant de court-circuit",Vmp:"Tension de puissance max",Imp:"Courant de puissance max"};function Ee(e){var t=e.project,a=e.setValue,n=V[t.module];return l.a.createElement(l.a.Fragment,null,l.a.createElement(ae,{label:"Energy total",value:d(t.energyBesoinTotal,2),unit:"Kwh/j"}),l.a.createElement(me,{field:function(){return l.a.createElement(l.a.Fragment,null,"H",l.a.createElement("sub",null,"tilt"))},value:d(t.Htilt),min:0,step:.01,setValue:function(e){return a("Htilt",e)}}),l.a.createElement(me,{field:function(){return l.a.createElement(l.a.Fragment,null,"K",l.a.createElement("sub",null,"loss"))},value:d(t.Kloss),min:0,step:.01,setValue:function(e){return a("Kloss",e)}}),l.a.createElement(me,{field:"Efficacite d'equilibre",value:d(t.\u0220b),min:0,step:.01,setValue:function(e){return a("\u0220b",e)}}),l.a.createElement("hr",null),l.a.createElement(ae,{label:"Puissance \xe0 installer",value:d(t.Pc,2),unit:"Kw"}),l.a.createElement(ne,{label:"Choix de module",items:V,value:t.module,onChange:function(e){return a("module",e)}}),l.a.createElement(de,{module:n?{type:n.type,Pm:"".concat(n.Pm," Wc"),Voc:"".concat(n.Voc," V"),Isc:"".concat(n.Isc," A"),Vmp:"".concat(n.Vmp," V"),Imp:"".concat(n.Imp," A")}:null,labels:pe}),l.a.createElement(ce,{value:d(t.Vsystem),unit:"V",min:0,max:48,step:12,field:"Tension du system",setValue:function(e){return a("Vsystem",e)}}),l.a.createElement(le,{label:"Modules en serie",value:d(t.Msc)}),l.a.createElement(le,{label:"Modules en parallel",value:d(t.Mpc)}),l.a.createElement(le,{label:"Nombre de modules total",value:d(t.Mt)}))}var be={model:"Model",vendor:"Marque",Vnom:"Tension norminale",Cnom:"Capacite nominale","\u0220":"Rendement"};function ve(e){var t=e.project,a=e.setValue,n=t.Nc,r=t.DODmax,c=t.\u0220out,m=t.battery,o=-1===m?null:x[m],s=d(t.Cx,2),i=t.Bsc,E=t.Bpc,b=t.Bt;return l.a.createElement(l.a.Fragment,null,l.a.createElement(me,{field:"Nc",min:1,max:10,value:n,setValue:function(e){return a("Nc",e)}}),l.a.createElement(me,{field:"DODmax",min:.01,max:1,step:.01,value:r,setValue:function(e){return a("DODmax",e)}}),l.a.createElement(me,{field:"\u0220out",min:.01,max:1,step:.01,value:c,setValue:function(e){return a("\u0220out",e)}}),l.a.createElement(ae,{label:"Capacite des batteries a installer",value:s,unit:"Ah"}),l.a.createElement(ne,{label:"Choix de battries",onChange:function(e){return a("battery",e)},value:t.battery,items:x.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:"".concat(e.Vnom,"V / ").concat(e.Cnom," Ah ").concat(e.vendor)})}))}),l.a.createElement(de,{labels:be,module:o?{model:o.model,vendor:o.vendor,Vnom:"".concat(o.Vnom," V"),Cnom:"".concat(o.Cnom," Ah"),"\u0220":"".concat(p(o.\u0220))}:null}),l.a.createElement(le,{label:"Nombre des battries total",value:d(b)}),l.a.createElement(le,{label:"Nombre des battries en series",value:d(i)}),l.a.createElement(le,{label:"Nombre des battries en parallel",value:d(E)}))}var fe={vendor:"Marque",Pnom:"Puissance nominale",PVmpp:"Plage de tension MPP",Vmax:"Tension maximal","\u0220":"Rendement"};function Ne(e){var t=e.project,a=e.setValue,n=t.inverter,r=-1===n?null:w[n];return l.a.createElement(l.a.Fragment,null,l.a.createElement(ae,{value:d(t.Pi,2),unit:"Kw",label:"Puissance d'onduleur"}),l.a.createElement(ae,{value:d(t.Vsystem,2),unit:"V",label:"Tension d'onduleur"}),l.a.createElement(ne,{value:n,onChange:function(e){return a("inverter",e)},items:w.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{name:"".concat(e.vendor," - ").concat(e.Pnom," Kw - Inverter")})})),label:"Choix d'onduleur"}),l.a.createElement(de,{labels:fe,module:r?{vendor:r.vendor,Pnom:"".concat(r.Pnom," KVA"),PVmpp:"de ".concat(r.PVmpp.join(" a ")," V"),Vmax:"".concat(r.Vmax," V"),"\u0220":"".concat(p(r.\u0220))}:null}),l.a.createElement(le,{value:d(t.nombreOnduleur),label:"Nombre d'onduleur"}))}var ge={name:"Nom",I:"Courant",Vout:"Tension de parc batteries"};function he(e){var t=e.project,a=e.setValue,n=t.regulator,r=-1===n?null:O[n],c=t.Rc,m=t.Irated;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ae,{value:d(m,2),unit:"A",label:function(){return l.a.createElement(l.a.Fragment,null,"I",l.a.createElement("sub",null,"rated"))}}),l.a.createElement(ne,{value:n,onChange:function(e){return a("regulator",e)},items:O,label:"Choix de regulateur"}),l.a.createElement(de,{labels:ge,module:r?{name:r.name,I:"".concat(r.I," A"),Vout:"".concat(r.Vout," V")}:null}),l.a.createElement(le,{value:d(c),label:"Nombre de regulateur"}))}function je(e){var t=e.toExponential(2).split("e"),a=Object(W.a)(t,2),n=a[0],r=a[1],c=parseInt(r,10);return l.a.createElement(l.a.Fragment,null,n,"\xd710",l.a.createElement("sup",null,c))}function ye(e){var t=e.project,a=e.setValue;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-sm table-hover align-middle"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"\u03c1 (\u03a9m)"),l.a.createElement("th",null,"L (m)"),l.a.createElement("th",null,"I (A)"),l.a.createElement("th",null,"V",l.a.createElement("sub",null,"d")," (V)"),l.a.createElement("th",null,"S (mm",l.a.createElement("sup",null,"2"),")"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Cables entre PV et regulateur"),l.a.createElement("td",null,je(P)),l.a.createElement("td",null,l.a.createElement("input",{type:"number",min:"0",step:"0.01",className:"form-control-plaintext",value:t.Lmr,onChange:function(e){return a("Lmr",e.target.valueAsNumber)}})),l.a.createElement("td",null,d(t.Irated,2)),l.a.createElement("td",null,d(t.Vmr,2)),l.a.createElement("td",null,d(t.Smr,2))),l.a.createElement("tr",null,l.a.createElement("th",null,"Cables entre parc battries et l'oduleur"),l.a.createElement("td",null,je(P)),l.a.createElement("td",null,l.a.createElement("input",{type:"number",min:"0",step:"0.01",className:"form-control-plaintext",value:t.Lbi,onChange:function(e){return a("Lbi",e.target.valueAsNumber)}})),l.a.createElement("td",null,d(t.Ibi,2)),l.a.createElement("td",null,d(t.Vbi,2)),l.a.createElement("td",null,d(t.Sbi,2))),l.a.createElement("tr",null,l.a.createElement("th",null,"Cables entre L'onduleur et la charge"),l.a.createElement("td",null,je(P)),l.a.createElement("td",null,l.a.createElement("input",{type:"number",min:"0",step:"0.01",className:"form-control-plaintext",value:t.Lic,onChange:function(e){return a("Lic",e.target.valueAsNumber)}})),l.a.createElement("td",null,d(t.Iic,2)),l.a.createElement("td",null,d(k,2)),l.a.createElement("td",null,d(t.Sic,2)))))))}function xe(){return 1e3*Math.floor(Date.now()/1e3)}function Ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString().padStart(t,"0")}function we(e){var t=new Date(e);return l.a.createElement(l.a.Fragment,null,function(e){return Ve(e.getDate())}(t),"/",function(e){return Ve(e.getMonth()+1)}(t),"/",t.getFullYear()," ",function(e){return Ve(e.getHours())}(t),":",function(e){return Ve(e.getMinutes())}(t))}function Oe(e){var t,a,r,c=e.project,m=Object(n.useState)(xe()),o=Object(W.a)(m,2),u=o[0],s=o[1];Object(n.useEffect)((function(){var e=setInterval((function(){return s(xe())}),1e3);return function(){return clearInterval(e)}}),[u]);var i=d(null===(t=V[c.module])||void 0===t?void 0:t.Pm,2,"Kw"),p=d(c.Msc),E=d(c.Mpc),b=d(c.Mt),v=d(c.Cx,2,"Ah"),f=d(c.Bsc),N=d(c.Bpc),g=d(c.Bt),h=d(null===(a=O[c.regulator])||void 0===a?void 0:a.I,2,"A"),j=d(c.Rc),y=d(null===(r=w[c.inverter])||void 0===r?void 0:r.Pnom,2,"KVA"),x=d(c.Vsystem,void 0,"V"),P=d(c.nombreOnduleur),C="".concat(d(c.Irated,2,"A"),"; ").concat(d(c.Smr,2,"mm\xb2")),I="".concat(d(c.Ibi,2,"A"),"; ").concat(d(c.Sbi,2,"mm\xb2")),S="".concat(d(c.Iic,2,"A"),"; ").concat(d(c.Sic,2,"mm\xb2"));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"border rounded-sm border-secondary text-center p-2"},"Date de simulation: ",we(u),l.a.createElement("div",{className:"d-print-none my-1"},l.a.createElement("button",{className:"btn btn-success",onClick:function(){return window.print()}},"Imprimer"))),l.a.createElement("div",{className:"border rounded-sm border-secondary mt-1 p-2"},l.a.createElement("div",{className:"d-flex justify-content-between align-items-stretch mb-3"},l.a.createElement("div",{className:"d-flex flex-grow-1 flex-column justify-content-center align-items-stretch text-center"},l.a.createElement("h1",null,"Syst\xe8me isol\xe9 avec battries"),l.a.createElement("h3",null,"rapport de simulation"))),l.a.createElement("p",null,l.a.createElement("b",null,"Nom du projet"),": ",c.name),l.a.createElement("p",null,l.a.createElement("b",null,"Site geographique"),": ",c.site),l.a.createElement("p",null,l.a.createElement("b",null,"La consomation moyenne journali\xe8re"),": ",c.energyBesoinTotal," Kwh/j"),l.a.createElement("p",null,l.a.createElement("b",null,"La production energetique"),": ",i),l.a.createElement("p",null,l.a.createElement("b",null,"Capacite de stockage"),": ",v),l.a.createElement("figure",{className:"text-center p-1"},l.a.createElement("img",{width:"60%",className:"border rounded-sm border-secondary p-3",src:"/usra-app/diagram.svg".replace(/\/\//,"/"),alt:"Schema de l'installation"}),l.a.createElement("figcaption",{className:"figure-caption"},"Schema de l'installation.")),l.a.createElement("h5",null,"Bilan de dimensionnement"),l.a.createElement("div",{className:"table-responsive"},l.a.createElement("table",{className:"table table-bordered border border-secondary text-center align-middle"},l.a.createElement("thead",null,l.a.createElement("th",{className:"border border-secondary"},"Composant"),l.a.createElement("th",{className:"border border-secondary"},"Description du composant"),l.a.createElement("th",{className:"border border-secondary"},"Resultats")),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Estimation du besoin"),l.a.createElement("td",{className:"text-right"},"L'energie moyenne journaliere a consommer"),l.a.createElement("td",null,c.energyBesoinTotal," Kwh/j")),l.a.createElement("tr",null,l.a.createElement("th",{rowSpan:4},"ChampPV"),l.a.createElement("td",{className:"text-right"},"La puissance produite"),l.a.createElement("td",null,i)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre de PV en serie"),l.a.createElement("td",null,p)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre de PV en parallel"),l.a.createElement("td",null,E)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre total des panneaux"),l.a.createElement("td",null,b)),l.a.createElement("tr",null,l.a.createElement("th",{rowSpan:4},"Parc batteries"),l.a.createElement("td",{className:"text-right"},"La capacite des batteries"),l.a.createElement("td",null,v)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre de battries en serie"),l.a.createElement("td",null,f)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre des battries en parallel"),l.a.createElement("td",null,N)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre total des battries"),l.a.createElement("td",null,g)),l.a.createElement("tr",null,l.a.createElement("th",{rowSpan:2},"Regulateur"),l.a.createElement("td",{className:"text-right"},"Capacite du regulateur"),l.a.createElement("td",null,h)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre de regulateur"),l.a.createElement("td",null,j)),l.a.createElement("tr",null,l.a.createElement("th",{rowSpan:3},"Onduleur"),l.a.createElement("td",{className:"text-right"},"Capacite d'onduleur"),l.a.createElement("td",null,y)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Besoin d'entree"),l.a.createElement("td",null,x)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Nombre d'onduleur"),l.a.createElement("td",null,P)),l.a.createElement("tr",null,l.a.createElement("th",{rowSpan:3},"Cables"),l.a.createElement("td",{className:"text-right"},"Entre champ PV et regulateur"),l.a.createElement("td",null,C)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Entre battries et onduleur"),l.a.createElement("td",null,I)),l.a.createElement("tr",null,l.a.createElement("td",{className:"text-right"},"Entre onduleur et charge"),l.a.createElement("td",null,S))))),l.a.createElement("div",{className:"d-print-none text-center"},l.a.createElement("button",{className:"btn btn-success",onClick:function(){return window.print()}},"Imprimer"))))}var Pe=Object(q.b)((function(e,t){var a=t.current;return{current:a,project:e.projects.find((function(e){return e.id===a}))}}),{setNeeds:function(e,t){return{type:"project.needs:set",payload:{id:e,needs:t}}},setValue:function(e,t,a){return{type:"project:set",payload:{id:e,name:t,value:a}}}})((function(e){var t=e.project,a=e.setNeeds,n=e.setValue;return t?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-xl-8"},l.a.createElement("ul",{className:"nav nav-tabs d-print-none"},l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success active","data-toggle":"tab",href:"#needs"},"Besoins")),l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success","data-toggle":"tab",href:"#dim-pv"},"Dim. PV")),l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success","data-toggle":"tab",href:"#dim-bat"},"Dim. Batteries")),l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success","data-toggle":"tab",href:"#dim-ond"},"Dim. Onduleur")),l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success","data-toggle":"tab",href:"#dim-reg"},"Dim. Regulateurs")),l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success","data-toggle":"tab",href:"#dim-cab"},"Dim. Cables")),l.a.createElement("li",{className:"nav-item flex-sm-fill"},l.a.createElement("a",{className:"nav-link link-success","data-toggle":"tab",href:"#dim-rep"},"Rapport"))),l.a.createElement("div",{className:"tab-content"},l.a.createElement("div",{className:"tab-pane py-4 fade show active",id:"needs"},l.a.createElement(te,{current:t.id,needs:t.needs,setNeeds:a})),l.a.createElement("div",{className:"tab-pane py-4 fade",id:"dim-pv"},l.a.createElement(Ee,{project:t,setValue:function(e,a){return n(t.id,e,a)}})),l.a.createElement("div",{className:"tab-pane py-4 fade",id:"dim-bat"},l.a.createElement(ve,{project:t,setValue:function(e,a){return n(t.id,e,a)}})),l.a.createElement("div",{className:"tab-pane py-4 fade",id:"dim-ond"},l.a.createElement(Ne,{project:t,setValue:function(e,a){return n(t.id,e,a)}})),l.a.createElement("div",{className:"tab-pane py-4 fade",id:"dim-reg"},l.a.createElement(he,{project:t,setValue:function(e,a){return n(t.id,e,a)}})),l.a.createElement("div",{className:"tab-pane py-4 fade",id:"dim-cab"},l.a.createElement(ye,{project:t,setValue:function(e,a){return n(t.id,e,a)}})),l.a.createElement("div",{className:"tab-pane py-4 fade",id:"dim-rep"},l.a.createElement(Oe,{project:t}))))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col-xl-4"}))})),Ce=a(3);function Ie(e){var t=e.match.params.id,a=t?parseInt(t,10):-1;return l.a.createElement(l.a.Fragment,null,isFinite(a)&&-1!==a?l.a.createElement(Ce.a,{to:"/".concat(a)}):l.a.createElement(Ce.a,{to:"/"}),l.a.createElement("div",{className:"row"},l.a.createElement(Pe,{current:a}),l.a.createElement("div",{className:"col-xl-4"},l.a.createElement(J,{current:a}))))}function Se(){return l.a.createElement("div",{className:"container-md"},l.a.createElement("div",{className:"d-print-none mt-3"}),l.a.createElement(Ce.b,{exact:!0,path:"/",component:Ie}),l.a.createElement(Ce.b,{path:"/:id",component:Ie}))}var ke=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{store:B},l.a.createElement(D.a,{basename:"/usra-app"},l.a.createElement(K,null),l.a.createElement(Se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.13c4377c.chunk.js.map